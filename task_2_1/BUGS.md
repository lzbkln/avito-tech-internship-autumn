# Общее описание

В случае ошибок клиент получает непонятное сообщение об ошибке почти во всех случаях. Это указывает на неправильную
обработку ошибок и отсутствие валидации на стороне сервера.

# Окружение

- Версия Python: 3.10.7
- Версия Pytest: 9.0.2
- Тестовый стенд (URL API) [URL](https://qa-internship.avito.com)

---

## Баг-репорты для ручки "Создание объявления" (`POST /api/1/item`)

| Название (Title)                                                           | Подробное описание                                                                                                                                                                                                                                                                         | Тест-кейс | Шаги воспроизведения (Steps to Reproduce)                                                                                                                                                                                                   | Ожидаемый результат (Expected Result)                                                             | Фактический результат (Actual Result)                                                                                                | Серьезность (Severity)                                                                                                                                         | Приоритет (Priority)                                                                                                                       |
|----------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| Ошибка 400 при создании объявления с `contacts = 0`                        | API возвращает ошибку валидации "поле contacts обязательно" при передаче валидного числового значения 0. Сервер воспринимает ноль как отсутствие данных, хотя бизнес-логика допускает нулевое значение для новых объявлений.                                                               | 1.4       | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 0, "likes": 2, "viewCount": 5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.    | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Статус-код **400 Bad Request**. Тело ответа: `{"result": {"message": "поле contacts обязательно", "messages": {}}, "status": "400"}` | Major (Функциональная ошибка: бизнес-логика допускает ноль, но API блокирует создание записи, что ограничивает работоспособность функции создания объявлений). | Medium (Требует исправления, так как падает автоматизированный тест-кейс и блокируется корректное сохранение статистики новых объявлений). |
| Ошибка 400 при создании объявления с `likes = 0`                           | API возвращает ошибку валидации "поле likes обязательно" при передаче валидного числового значения 0. Сервер воспринимает ноль как отсутствие данных, хотя бизнес-логика допускает нулевое значение для новых объявлений.                                                                  | 1.5       | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 2, "likes": 0, "viewCount": 5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.    | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Статус-код **400 Bad Request**. Тело ответа: `{"result": {"message": "поле likes обязательно", "messages": {}}, "status": "400"}`    | Major (Функциональная ошибка: бизнес-логика допускает ноль, но API блокирует создание записи, что ограничивает работоспособность функции создания объявлений). | Medium (Требует исправления, так как падает автоматизированный тест-кейс и блокируется корректное сохранение статистики новых объявлений). |
| Ошибка 400 при создании объявления с нулевыми значениями в `statistics`    | API возвращает ошибку валидации "поле likes обязательно" при передаче нулевых значений для всех параметров статистики. Бизнес-логика допускает нулевые значения для новых объявлений, где статистика еще не накоплена.                                                                     | 1.7       | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 0, "likes": 0, "viewCount": 0}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.    | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Статус-код **400 Bad Request**. Тело ответа: `{"result": {"message": "полe likes обязательно", "messages": {}}, "status": "400"}`    | Major (Функциональная ошибка: бизнес-логика допускает нулевые значения, но API блокирует создание записи).                                                     | Medium (Требует исправления, так как ограничивает возможность создания объявлений без начальной статистики).                               |
| Ошибка 400 при создании объявления с `price = 0`                           | API возвращает ошибку валидации "поле price обязательно" при передаче нулевого значения. Бизнес-логика допускает нулевую цену для бесплатных объявлений или промо-акций.                                                                                                                   | 1.6       | 1. Отправить POST-запрос на создание объявления. <br/>2. Передать параметр `price=0`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", statistics={"contacts": 2, "likes": 2, "viewCount": 5}`.                     | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Статус-код **400 Bad Request**. Тело ответа: `{"result": {"message": "полe price обязательно", "messages": {}}, "status": "400"}`    | Major (Функциональная ошибка: бизнес-логика допускает нулевую цену, но API блокирует создание записи).                                                         | Medium (Требует исправления, так как ограничивает возможность создания бесплатных объявлений).                                             |
| Статус-код 200 при `sellerID` ниже минимального значения                   | API возвращает статус-код **200 OK** при передаче `sellerID` ниже минимального значения, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением о недопустимости значения. Бизнес-логика требует, чтобы `sellerID` был в диапазоне от 111111 до 999999.                  | 1.9       | 1. Отправить POST-запрос на создание объявления. <br/>2. Передать параметр `sellerID=111110`. <br/>3. Использовать тестовые данные: `name: "iPhone", price: 40000, statistics={"contacts": 1, "likes": 2, "viewCount": 5}`.                 | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API пропускает некорректные значения `sellerID`, что нарушает бизнес-логику).                                                         | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при `sellerID` выше максимального значения                  | API возвращает статус-код **200 OK** при передаче `sellerID` выше максимального значения, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением о недопустимости значения. Бизнес-логика требует, чтобы `sellerID` был в диапазоне от 111111 до 999999.                 | 1.10      | 1. Отправить POST-запрос на создание объявления. <br/>2. Передать параметр `sellerID=1000000`. <br/>3. Использовать тестовые данные: `name: "iPhone", price: 40000, statistics={"contacts": 1, "likes": 2, "viewCount": 5}`.                | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API пропускает некорректные значения `sellerID`, что нарушает бизнес-логику).                                                         | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при отрицательном значении `price`                          | API возвращает статус-код **200 OK** при передаче отрицательного значения `price`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением, что отрицательные значения не допустимы. Бизнес-логика требует, чтобы `price` был положительным числом.                       | 1.11      | 1. Отправить POST-запрос на создание объявления. <br/>2. Передать параметр `price=-40000`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", statistics={"contacts": 1, "likes": 2, "viewCount": 5}`.                | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API пропускает отрицательные значения `price`, что нарушает бизнес-логику).                                                           | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при отрицательном значении `contacts`                       | API возвращает статус-код **200 OK** при передаче отрицательного значения `contacts`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением, что отрицательные значения не допустимы. Бизнес-логика требует, чтобы `contacts` был положительным числом.                 | 1.12      | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": -10, "likes": 2, "viewCount": 5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.  | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API пропускает отрицательные значения `contacts`, что нарушает бизнес-логику).                                                        | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при отрицательном значении `likes`                          | API возвращает статус-код **200 OK** при передаче отрицательного значения `likes`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением, что отрицательные значения не допустимы. Бизнес-логика требует, чтобы `likes` был положительным числом.                       | 1.13      | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 10, "likes": -35, "viewCount": 5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`. | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API пропускает отрицательные значения `likes`, что нарушает бизнес-логику).                                                           | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при отрицательном значении `viewCount`                      | API возвращает статус-код **200 OK** при передаче отрицательного значения `viewCount`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением, что отрицательные значения не допустимы. Бизнес-логика требует, чтобы `viewCount` был положительным числом.               | 1.14      | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 1, "likes": 2, "viewCount": -5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.   | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API пропускает отрицательные значения `viewCount`, что нарушает бизнес-логику).                                                       | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при `viewCount = 0` и ненулевых `likes` и `contacts`   **** | API возвращает статус-код **200 OK** при передаче `viewCount = 0` и ненулевых `likes` и `contacts`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением о недопустимости такой ситуации. Бизнес-логика требует, чтобы `viewCount` был не меньше `likes` и `contacts`. | 1.15      | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 10, "likes": 2, "viewCount": 0}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.   | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API не проверяет бизнес-логику соотношения полей).                                                                                    | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при `viewCount <= likes`                                    | API возвращает статус-код **200 OK** при передаче `viewCount <= likes`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением о недопустимости такой ситуации. Бизнес-логика требует, чтобы `viewCount` был не меньше `likes`.                                          | 1.16      | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 1, "likes": 100, "viewCount": 5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.  | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API не проверяет бизнес-логику соотношения полей).                                                                                    | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |
| Статус-код 200 при `viewCount <= contacts`                                 | API возвращает статус-код **200 OK** при передаче `viewCount <= contacts`, хотя ожидается ошибка валидации с кодом **400 Bad Request** и сообщением о недопустимости такой ситуации. Бизнес-логика требует, чтобы `viewCount` был не меньше `contacts`.                                    | 1.17      | 1. Отправить POST-запрос на создание объявления. <br/>2. В объекте статистики передать `statistics={"contacts": 100, "likes": 2, "viewCount": 5}`. <br/>3. Использовать тестовые данные: `sellerID: 345123, name: "iPhone", price: 40000`.  | Статус-код **400 Bad Request**.                                                                   | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта.                                    | Major (Ошибка валидации: API не проверяет бизнес-логику соотношения полей).                                                                                    | High (Требует срочного исправления, так как нарушается бизнес-логика).                                                                     |

## Баг-репорты для ручки "Получение объявлений по ID продавца" (`GET /api/1/{seller_id}/item`)

| Название (Title)                                      | Подробное описание                                                                                                                                                                                                                                             | Тест-кейс | Шаги воспроизведения (Steps to Reproduce)                                                                                                                                                 | Ожидаемый результат (Expected Result) | Фактический результат (Actual Result)                                                             | Серьезность (Severity)                                                                                  | Приоритет (Priority)                                                   |
|-------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|---------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
| Ошибка 200 при отрицательном значении `sellerID`      | API возвращает статус-код **200 OK** при передаче отрицательного значения `sellerID`, хотя ожидается ошибка с кодом **400 Bad Request** и сообщением о недопустимости отрицательных значений. `sellerID` должен быть в диапазоне от 111111 до 999999.          | 4.4       | 1. Отправить GET-запрос c параметром `sellerID=-123456`.<br/>2. Использовать тестовые данные: `name: "iPhone", price: 40000, statistics={"contacts": 1, "likes": 2, "viewCount": 5}`.     | Статус-код **400 Bad Request**.       | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Major (Ошибка валидации: API пропускает отрицательные значения `sellerID`, что нарушает бизнес-логику). | High (Требует срочного исправления, так как нарушается бизнес-логика). |
| Ошибка 200 при слишком большом значении `sellerID`    | API возвращает статус-код **200 OK** при передаче слишком большого значения `sellerID`, хотя ожидается ошибка с кодом **400 Bad Request** и сообщением о превышении допустимого диапазона. `sellerID` должен быть в диапазоне от 111111 до 999999.             | 2.5       | 1. Отправить GET-запрос c параметром `sellerID=12345678910`.<br/>2. Использовать тестовые данные: `name: "iPhone", price: 40000, statistics={"contacts": 1, "likes": 2, "viewCount": 5}`. | Статус-код **400 Bad Request**.       | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Major (Ошибка валидации: API пропускает значения `sellerID`, превышающие допустимый диапазон).          | High (Требует срочного исправления, так как нарушается бизнес-логика). |
| Ошибка 200 при `sellerID` выше максимального значения | API возвращает статус-код **200 OK** при передаче `sellerID` выше максимального значения (1000000), хотя ожидается ошибка с кодом **400 Bad Request** и сообщением о превышении допустимого диапазона. `sellerID` должен быть в диапазоне от 111111 до 999999. | 4.7       | 1. Отправить GET-запрос c параметром `sellerID=1000000`.<br/>2. Использовать тестовые данные: `name: "iPhone", price: 40000, statistics={"contacts": 1, "likes": 2, "viewCount": 5}`.     | Статус-код **400 Bad Request**.       | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Major (Ошибка валидации: API пропускает значения `sellerID`, превышающие допустимый диапазон).          | High (Требует срочного исправления, так как нарушается бизнес-логика). |
| Ошибка 200 при `sellerID` ниже минимального значения  | API возвращает статус-код **200 OK** при передаче `sellerID` ниже минимального значения (111110), хотя ожидается ошибка с кодом **400 Bad Request** и сообщением о недопустимости значения. `sellerID` должен быть в диапазоне от 111111 до 999999.            | 4.6       | 1. Отправить GET-запрос c параметром `sellerID=111110`.<br/>2. Использовать тестовые данные: `name: "iPhone", price: 40000, statistics={"contacts": 1, "likes": 2, "viewCount": 5}`.      | Статус-код **400 Bad Request**.       | Статус-код **200 OK**. Объявление успешно создано, в ответе получен идентификатор нового объекта. | Major (Ошибка валидации: API пропускает значения `sellerID`, ниже допустимого диапазона).               | High (Требует срочного исправления, так как нарушается бизнес-логика). |
